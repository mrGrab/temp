{"version":3,"sources":["../src/Form.js"],"names":["React","Provider","DefaultStateProvider","defaultStateProviderProp","config","render","FormWrapper","PureComponent","props","children","actions","submitting","submitFailed","submitSucceeded","hasErrors","hasSubmitErrors","hasWarnings","Form","stateProvider","context","_lastSetActions","errorState","submitErrorState","warningState","defaultProps"],"mappings":";;AAAA;AAEA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAUA,SAAQC,QAAR,QAAuB,WAAvB;AAEA,OAAOC,oBAAP,MAAiC,wBAAjC;;AAKA,SAASC,wBAAT,CACEC,MADF,EAEEC,MAFF,EAGE;AACA,SAAO,oBAAC,oBAAD,EAA0BD,MAA1B,EAAmCC,MAAnC,CAAP;AACD;;AAED,MAAMC,WAAN,SAA0BN,MAAMO,aAAhC,CAAgE;AAC9DF,WAAS;AACP,WAAO,KAAKG,KAAL,CAAWC,QAAX,CACL,SAAc,EAAd,EAAkB,KAAKD,KAAL,CAAWE,OAA7B,EAAsC;AACpCC,kBAAY,KAAKH,KAAL,CAAWG,UADa;AAEpCC,oBAAc,KAAKJ,KAAL,CAAWI,YAFW;AAGpCC,uBAAiB,KAAKL,KAAL,CAAWK,eAHQ;AAIpCC,iBAAW,KAAKN,KAAL,CAAWM,SAJc;AAKpCC,uBAAiB,KAAKP,KAAL,CAAWO,eALQ;AAMpCC,mBAAa,KAAKR,KAAL,CAAWQ;AANY,KAAtC,CADK,CAAP;AAUD;;AAZ6D;;AAehE,MAAMC,IAAN,SACUjB,MAAMO,aADhB,CAEyB;AAYvBF,WAAS;AACP,WAAO,KAAKG,KAAL,CAAWU,aAAX,CAAyB,KAAKV,KAA9B,EAAsCW,OAAD,IAAsB;AAChE,UAAI,KAAKC,eAAL,KAAyBD,QAAQT,OAArC,EAA8C;AAC5C,iBAAc,IAAd,EAAoBS,QAAQT,OAA5B;;AACA,aAAKU,eAAL,GAAuBD,QAAQT,OAA/B;AACD;;AACD,aACE,oBAAC,QAAD;AAAU,eAAOS;AAAjB,SACE,oBAAC,WAAD;AACE,iBAASA,QAAQT,OADnB;AAEE,oBAAYS,QAAQR,UAFtB;AAGE,sBAAcQ,QAAQP,YAHxB;AAIE,yBAAiBO,QAAQN,eAJ3B;AAKE,mBAAWM,QAAQE,UAAR,KAAuB,IALpC;AAME,yBAAiBF,QAAQG,gBAAR,KAA6B,IANhD;AAOE,qBAAaH,QAAQI,YAAR,KAAyB;AAPxC,SASG,KAAKf,KAAL,CAAWC,QATd,CADF,CADF;AAeD,KApBM,CAAP;AAqBD;;AAlCsB;;AAqCzBQ,KAAKO,YAAL,GAAoB;AAClBN,iBAAef;AADG,CAApB;AAIA,eAAec,IAAf","sourcesContent":["// @flow strict\n\nimport * as React from 'react';\n\nimport type {\n  FormProps,\n  FormWrapperProps,\n  Context,\n  FormActions,\n  Path,\n} from './types';\n\nimport {Provider} from './context';\n\nimport DefaultStateProvider from './DefaultStateProvider';\n\ntype DefaultStateProviderConfig = React.ElementConfig<\n  typeof DefaultStateProvider,\n>;\nfunction defaultStateProviderProp(\n  config: DefaultStateProviderConfig,\n  render: (context: Context) => React.Node,\n) {\n  return <DefaultStateProvider {...config}>{render}</DefaultStateProvider>;\n}\n\nclass FormWrapper extends React.PureComponent<FormWrapperProps> {\n  render() {\n    return this.props.children(\n      Object.assign({}, this.props.actions, {\n        submitting: this.props.submitting,\n        submitFailed: this.props.submitFailed,\n        submitSucceeded: this.props.submitSucceeded,\n        hasErrors: this.props.hasErrors,\n        hasSubmitErrors: this.props.hasSubmitErrors,\n        hasWarnings: this.props.hasWarnings,\n      }),\n    );\n  }\n}\n\nclass Form<StateProviderProps>\n  extends React.PureComponent<FormProps<StateProviderProps>, Context>\n  implements FormActions {\n  static defaultProps: typeof Form.defaultProps;\n\n  _lastSetActions: ?FormActions;\n  setValue: (path: Path, value: mixed) => void;\n  setInitialValue: (path: Path, value: mixed) => void;\n  setPendingValue: (path: Path, value: mixed) => void;\n  setTouched: (path: Path, touched: boolean) => void;\n  setVisited: (path: Path, visited: boolean) => void;\n  setFocused: (path: Path, focused: boolean) => void;\n  submit: (event?: Event | SyntheticEvent<>) => void;\n\n  render() {\n    return this.props.stateProvider(this.props, (context: Context) => {\n      if (this._lastSetActions !== context.actions) {\n        Object.assign(this, context.actions);\n        this._lastSetActions = context.actions;\n      }\n      return (\n        <Provider value={context}>\n          <FormWrapper\n            actions={context.actions}\n            submitting={context.submitting}\n            submitFailed={context.submitFailed}\n            submitSucceeded={context.submitSucceeded}\n            hasErrors={context.errorState !== null}\n            hasSubmitErrors={context.submitErrorState !== null}\n            hasWarnings={context.warningState !== null}\n          >\n            {this.props.children}\n          </FormWrapper>\n        </Provider>\n      );\n    });\n  }\n}\n\nForm.defaultProps = {\n  stateProvider: defaultStateProviderProp,\n};\n\nexport default Form;\n"],"file":"Form.js"}